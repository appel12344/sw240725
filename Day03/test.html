<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        window.onload = function() {
            var memoTxt = document.getElementById('memoTxt'); // id가 'memoTxt'인 입력란 요소를 변수에 저장
            var demo = document.querySelector('#demo tbody'); // id가 'demo'인 <tbody> 요소를 변수에 저장
            var clickBtn = document.querySelector('#clickBtn'); // id가 'clickBtn'인 버튼 요소를 변수에 저장
            var resetBtn = document.querySelector('#resetBtn'); // id가 'resetBtn'인 버튼 요소를 변수에 저장
            var searchTxt = document.getElementById('searchTxt'); // 검색 입력 필드
            var seq = 1; // 할일 번호를 저장할 변수

            var handleEvent = function(event) {
                var memoValue = memoTxt.value.trim(); // 입력된 값을 가져와서 공백 제거
                if (memoValue === "") return; // 빈 문자열일 경우 무시

                // 새로운 행을 생성
                var newRow = document.createElement('tr');
                newRow.setAttribute('align', 'center');
                newRow.setAttribute('data-seq', seq); // 시퀀스 번호를 데이터 속성으로 저장
                newRow.innerHTML = `
                    <td><input type="checkbox" class="todo-check"></td>
                    <td>${memoValue}</td>
                    <td><button class="editBtn">수정</button></td>
                    <td><button class="deleteBtn">삭제</button></td>
                `;
                
                demo.appendChild(newRow); // 새 행을 테이블에 추가
                console.log(seq + ", " + memoValue + ", false"); // 콘솔에 할일 정보 출력
                seq++; // 번호 증가

                memoTxt.value = ""; // 입력란 초기화
                memoTxt.focus(); // 입력란에 포커스를 다시 설정하여 사용자가 계속 입력할 수 있게 함
            };

            // 체크박스 체크 상태 확인
            document.addEventListener('change', function(event) {
                if (event.target.classList.contains('todo-check')) {
                    var checkbox = event.target;
                    var row = checkbox.parentElement.parentElement;
                    var seqNum = row.getAttribute('data-seq');
                    var todoText = row.cells[1].innerText;
                    console.log(seqNum + ", " + todoText + ": " + checkbox.checked); // 콘솔에 체크 상태 출력
                }
            });

            // 클릭 버튼에 대한 이벤트 핸들러 추가
            clickBtn.addEventListener('click', handleEvent);

            // 입력 필드에서 키가 눌릴 때의 이벤트 핸들러 추가
            memoTxt.onkeyup = function(event) {
                if (event.keyCode === 13) { // 엔터 키 확인
                    handleEvent(event); // 엔터 키가 눌리면 handleEvent 함수 실행
                }
            };

            // 삭제 버튼에 대한 이벤트 핸들러 추가
            demo.addEventListener('click', function(event) {
                if (event.target.classList.contains('deleteBtn')) {
                    var row = event.target.parentElement.parentElement;
                    var seqNum = row.getAttribute('data-seq');
                    var todoText = row.cells[1].innerText;
                    console.log(seqNum + ", " + todoText + " 항목 삭제됨"); // 콘솔에 삭제된 항목 출력
                    row.remove(); // 삭제 버튼이 클릭된 행을 삭제
                }
            });

            // 수정버튼 클릭시 
            demo.addEventListener('click',function(event){
                if(event.target.classList.contains('editBtn')){
                    
                }
            });



            // 검색 입력 필드에서 키가 눌릴 때의 이벤트 핸들러 추가
            searchTxt.onkeyup = function() {
                var searchValue = searchTxt.value.toLowerCase().trim();
                var rows = demo.getElementsByTagName('tr');
                for (var i = 0; i < rows.length; i++) {
                    var cells = rows[i].getElementsByTagName('td');
                    var todoText = cells[1].innerText.toLowerCase();
                    if (todoText.indexOf(searchValue) > -1) {
                        rows[i].style.display = '';
                    } else {
                        rows[i].style.display = 'none';
                    }
                }
            };
        };
    </script>
</head>
<body>
    <h1>Todo List</h1>
    <!-- 입력란: 사용자가 텍스트를 입력할 수 있는 곳 -->
    메모: <input type="text" id="memoTxt" value="">
    <!-- 버튼: 클릭 시 자바스크립트 동작을 트리거 -->
    <button type="button" id="clickBtn">Click</button>
    <button type="button" id="resetBtn">Reset</button>

    <hr>
    <!-- 검색 기능 -->
    검색: <input type="text" id="searchTxt">
    <button type="button" id="button" style="display: none;">검색</button> <!-- 검색 버튼은 숨김 -->

    <hr>

    <!--수정 기능-->
    수정: <input type="text" id="editTxt">
    <button type="button" id="button">수정완료</button>

    <hr> <!-- 수평선 -->
    <!-- 텍스트를 표시하는 <table> 요소 -->
    <table id="demo" width="550" border="1">
        <thead>
            <tr>
                <th>확인</th>
                <th>할일</th>
                <th>수정</th>
                <th>삭제</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</body>
</html>
